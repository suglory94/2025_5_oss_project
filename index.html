<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--모바일 깨짐 방지-->
    <title>평행우주시뮬레이션</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div class="container">
        <!-- 배경 애니메이션 효과 -->
        <div class="background-effects">
            <div class="effect-circle effect-1"></div>
            <div class="effect-circle effect-2"></div>
        </div>

        <!-- 메인 콘텐츠 -->
        <div class="content">
            <h1 class="title">평행우주시뮬레이션</h1>
            
            <div class="button-group">
                <button class="btn btn-outline" onclick="showHistory()">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    히스토리
                </button>
                
                <button class="btn btn-primary" onclick="goToChoiceScreen()">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    시작
                </button>

                <button class="btn btn-outline" onclick="showTimetable()">
                    <svg class="icon-time" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 7a.5.5 0 0 1 .5.5V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5A.5.5 0 0 1 8 7"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                    </svg>
                    시간표 입력
                </button>

            </div>
        </div>
    </div>

    <!-- 선택 화면 -->
    <div class="choice-screen" id="choiceScreen">
        <div class="aurora-background">
            <div class="aurora-effect aurora-1"></div>
            <div class="aurora-effect aurora-2"></div>
            <div class="aurora-effect aurora-3"></div>
        </div>

        <div class="choice-content">
            <div class="question-box">
                <p>질문</p>
            </div>

            <div class="choices-wrapper">
                <button class="choice-item" onclick="selectChoice(1)">
                    <span>선택1</span>
                </button>
                <button class="choice-item" onclick="selectChoice(2)">
                    <span>선택2</span>
                </button>
            </div>
        </div>

        <button class="back-btn" onclick="goBackToHome()">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            돌아가기
        </button>
    </div>

    <!-- 시간표 입력 화면 -->
    <div class="timetable-screen" id="timetableScreen">
        <div class="timetable-container">
            <h2 class="timetable-title">시간표 입력</h2>
            
            <div class="timetable-wrapper">
                <table class="timetable">
                    <thead>
                        <tr>
                            <th class="period-header">교시</th>
                            <th class="day-header">월</th>
                            <th class="day-header">화</th>
                            <th class="day-header">수</th>
                            <th class="day-header">목</th>
                            <th class="day-header">금</th>
                        </tr>
                    </thead>
                    <tbody id="timetableBody">
                    </tbody>
                </table>
                
            </div>
            <div class="timetable-hint">
                클릭해서 시간표를 입력해주세요.
                </div>

            <button class="timetable-back" onclick="goBackToHome()">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                돌아가기
            </button>
        </div>
    </div>

    <!-- 시간표 입력 모달 -->
    <div class="modal-overlay" id="timetableModal" onclick="closeTimetableModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3 id="modalTitle">시간 입력</h3>
            <input type="text" id="timetableInput" class="timetable-input" placeholder="과목명을 입력하세요">
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" onclick="closeTimetableModal()">취소</button>
                <button class="modal-btn confirm-btn" onclick="saveTimetableCell()">저장</button>
            </div>
        </div>
    </div>

    <script>
        const WEEKDAYS = ["월", "화", "수", "목", "금"];
        const PERIODS = [1, 2, 3, 4, 5, 6];

        let timetableData = [];

        function showHistory() {
            console.log('히스토리 보기');
            alert('히스토리 페이지로 이동합니다!');
        }

        function showTimetable() {
            console.log('시간표 입력');
            document.getElementById('timetableScreen').style.display = 'flex';
            initTimetable();
        }

        // 시간표 입력
        function initTimetable() {
            const tbody = document.getElementById('timetableBody');
            tbody.innerHTML = '';
            
            for (let period of PERIODS) {
                const row = document.createElement('tr');
                const periodCell = document.createElement('td');
                periodCell.className = 'period-cell';
                periodCell.textContent = period + '교시';
                row.appendChild(periodCell);
                
                for (let dayIndex = 0; dayIndex < WEEKDAYS.length; dayIndex++) {
                    const cell = document.createElement('td');
                    cell.className = 'timetable-cell';
                    const cellKey = dayIndex + '-' + period;
                    const cellData = timetableData.find(d => d.key === cellKey);
                    cell.textContent = cellData ? cellData.value : '';
                    cell.onclick = () => openTimetableModal(cellKey, period, WEEKDAYS[dayIndex]);
                    row.appendChild(cell);
                }
                tbody.appendChild(row);
            }
        }

        let currentCellKey = '';

        function openTimetableModal(cellKey, period, day) {
            currentCellKey = cellKey;
            const cellData = timetableData.find(d => d.key === cellKey);
            document.getElementById('modalTitle').textContent = day + '요일 ' + period + '교시';
            document.getElementById('timetableInput').value = cellData ? cellData.value : '';
            document.getElementById('timetableModal').style.display = 'flex';
            document.getElementById('timetableInput').focus();
        }

        function closeTimetableModal() {
            document.getElementById('timetableModal').style.display = 'none';
            document.getElementById('timetableInput').value = '';
            currentCellKey = '';
        }

        function saveTimetableCell() {
            const value = document.getElementById('timetableInput').value.trim();
            
            if (value === '') {
                timetableData = timetableData.filter(d => d.key !== currentCellKey);
            } else {
                const existingIndex = timetableData.findIndex(d => d.key === currentCellKey);
                if (existingIndex >= 0) {
                    timetableData[existingIndex].value = value;
                } else {
                    timetableData.push({ key: currentCellKey, value: value });
                }
            }
            
            closeTimetableModal();
            initTimetable();
        }
        
        //선택지 
        function selectChoice(choice) {
            console.log('선택: ' + choice);
            alert('선택 ' + choice + '을(를) 선택했습니다!');
        }

        function goToChoiceScreen() {
            document.getElementById('choiceScreen').style.display = 'flex';
        }

        function goBackToHome() {
            document.getElementById('choiceScreen').style.display = 'none';
            document.getElementById('timetableScreen').style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const input = document.getElementById('timetableInput');
            if (input) {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        saveTimetableCell();
                    }
                });
            }
        });
    </script>
</body>
</html>
